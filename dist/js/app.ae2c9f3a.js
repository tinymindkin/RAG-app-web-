(function(){"use strict";var e={2139:function(e,t,i){var l=i(6848),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"container"},[t("h2",[e._v("Your RAG")]),t("div",{staticClass:"showPage",staticStyle:{height:"40pc",y:"auto"}},[t("h3",[e._v("答案")]),e._v(" "+e._s(e.answer)+" "),t("hr"),t("h3",[e._v("参考")]),t("table",[e._m(0),e._l(e.references,(function(i,l){return t("tr",{key:l},[t("td",[e._v(e._s(i[0]))]),t("td",[e._v(e._s(i[1]+1))])])}))],2)]),t("div",{staticClass:"input-container"},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入问题"},model:{value:e.question,callback:function(t){e.question=t},expression:"question"}}),t("el-select",{attrs:{placeholder:"请选择broad_num"},model:{value:e.broad_num,callback:function(t){e.broad_num=t},expression:"broad_num"}},[t("p",[e._v("请选择宽泛程度")]),e._l(e.broad_nums,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}))],2),t("el-button",{on:{click:e.query}},[e._v("查询")])],1),t("br"),t("br")]),t("fileLoad")],1)},o=[function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticStyle:{color:"crimson"}},[e._v("title")]),e._v(" "),t("td",{staticStyle:{color:"crimson"}},[e._v("页数")])])}],a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-file"},[t("el-upload",{ref:"fileUpload",staticClass:"upload-file-uploader",attrs:{multiple:"",name:"multipartFile",action:e.uploadFileUrl,"http-request":e.uploadRequest,limit:e.limit,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,"on-exceed":e.handleExceed,"on-error":e.handleUploadError,"on-success":e.handleUploadSuccess,"show-file-list":!0}},[t("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[e._v("选取文件")]),e.showTip&&!e.disabled?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 pdf ")]:e._e(),e._v(" 的文件 ")],2):e._e()],1)],1)},s=[],r=(i(4114),i(4603),i(7566),i(8721),i(4373));r.A.defaults.withCredentials=!0;var u={name:"FileUpload",props:{limit:{type:Number,default:5},fileSize:{type:Number,default:20},fileType:{type:Array,default:()=>["docx","pptx","pdf"]},isShowTip:{type:Boolean,default:!0},formFileList:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},busiType:{type:String}},data(){return{number:0,uploadList:[],baseUrl:"http://118.31.113.55:8083",uploadFileUrl:"http://118.31.113.55:8083/updateFiles",headers:{cookies:document.cookie},fileList:[],lookFile:!1,url:"",preview:{open:!1,url:""},fileSuffix:"",loadindgInstance:null}},computed:{showTip(){return this.isShowTip&&(this.fileType||this.fileSize)}},methods:{handleBeforeUpload(e){if(this.fileType){const t=e.name.split("."),i=t[t.length-1];if(console.log(i),"pdf"!==i)return alert(`文件格式不正确, 请上传${this.fileType.join("/")}格式文件!`),!1}if(this.fileSize){const t=e.size/1024/1024<this.fileSize;if(!t)return alert(`上传文件大小不能超过 ${this.fileSize} MB!`),!1}return this.loadindgInstance=this.$loading("正在上传文件，请稍候..."),console.log("is loading------"),this.number++,!0},handleExceed(){alert(`上传文件数量不能超过 ${this.limit} 个!`)},handleUploadError(e){this.number--,alert("上传文件失败，请重试"),this.loadindgInstance.close(),console.log(e)},handleUploadSuccess(e,t){200===e.status?(this.uploadList.push(t.name),this.loadindgInstance.close(),this.uploadedSuccessfully()):(this.number--,this.loadindgInstance.close(),alert(e.msg),this.$refs.fileUpload.handleRemove(t),this.uploadedSuccessfully())},handleDelete(e){this.fileList.splice(e,1)},uploadedSuccessfully(){this.number>0&&this.uploadList.length===this.number&&(this.fileList=this.fileList.concat(this.uploadList),this.uploadList=[],this.number=0,this.loadindgInstance.close())},listToString(e,t){let i="";t=t||",";for(let l in e)i+=e[l].url+t;return""!=i?i.substr(0,i.length-1):""},resetFileList(){this.fileList=[]},exportFunction(e,t,i){const l=document.createElement("a"),n=new Blob([e],{type:i});l.style.display="none",l.href=URL.createObjectURL(n),l.setAttribute("download",t,i),document.body.appendChild(l),l.click(),document.body.removeChild(l)},handlePreview(e){this.preview.url="",-1!==e.fileType.indexOf("image")?this.fileSuffix="img":this.fileSuffix=e.suffix},previewCancel(){this.preview.open=!1,this.preview.url="","mp3"==this.fileSuffix&&this.$refs.myAudio.pause()},uploadRequest(e){r.A.post(this.uploadFileUrl,e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((t=>{this.handleUploadSuccess(t,e)})).catch((e=>{this.handleUploadError(e)}))}}},d=u,c=i(1656),f=(0,c.A)(d,a,s,!1,null,"3b043702",null),p=f.exports;r.A.defaults.withCredentials=!0;var h={name:"App",components:{fileLoad:p},data(){const e=this.$loading("正在初始化，请稍候...");return r.A.get("http://118.31.113.55:8083/init",{withCredentials:!0}).then((t=>{console.log("okokok");const i=t.headers["Set-Cookie"];console.log("当前 Cookie:",document.cookie,i),console.log(t.data),e.close()})).catch((t=>{e.close(),alert(`初始化错误，请刷新哦，亲：${t}`)})),{question:"",broad_nums:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"}],broad_num:5,loader:null,answer:"",references:[]}},methods:{query(){this.loader=this.$loading("正在上传文件，请稍候..."),r.A.get(`http://118.31.113.55:8083/query?question=${this.question}&broad_num=${this.broad_num}`,{withCredentials:!0}).then((e=>{console.log(e.data),this.answer=e.data.answer,this.references=e.data.references,this.loader.close()})).catch((e=>{this.loader.close(),alert(`请求错误：${e}`)}))}}},m=h,v=(0,c.A)(m,n,o,!1,null,null,null),b=v.exports,y=i(9143),_=i.n(y);l["default"].config.productionTip=!1,l["default"].use(_()),new l["default"]({render:e=>e(b)}).$mount("#app")}},t={};function i(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,l,n,o){if(!l){var a=1/0;for(d=0;d<e.length;d++){l=e[d][0],n=e[d][1],o=e[d][2];for(var s=!0,r=0;r<l.length;r++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](l[r])}))?l.splice(r--,1):(s=!1,o<a&&(a=o));if(s){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,n,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,o,a=l[0],s=l[1],r=l[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(r)var d=r(i)}for(t&&t(l);u<a.length;u++)o=a[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},l=self["webpackChunkragclient"]=self["webpackChunkragclient"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504],(function(){return i(2139)}));l=i.O(l)})();
//# sourceMappingURL=app.ae2c9f3a.js.map